{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/memoriza/codigo-fonte/memoriza-frontend/app/auth/google/callback/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, Suspense } from \"react\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\n\r\nfunction GoogleCallbackInner() {\r\n  const params = useSearchParams();\r\n  const router = useRouter();\r\n  const { loginWithToken } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const oauthError = params.get(\"error\");\r\n    const tokenFromServer = params.get(\"token\");\r\n    const returnUrlFromServer = params.get(\"returnUrl\") || \"/\";\r\n\r\n    if (oauthError && !tokenFromServer) {\r\n      // FIX: Redirect to /auth/login instead of /auth\r\n      router.replace(\r\n        `/auth/login?googleError=${encodeURIComponent(oauthError)}`\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (tokenFromServer) {\r\n      // salva token usando o contexto\r\n      loginWithToken(tokenFromServer);\r\n\r\n      // limpa query string da URL\r\n      if (typeof window !== \"undefined\" && window.history?.replaceState) {\r\n        const cleanUrl = window.location.pathname;\r\n        window.history.replaceState({}, \"\", cleanUrl);\r\n      }\r\n\r\n      router.replace(returnUrlFromServer);\r\n      return;\r\n    }\r\n\r\n    // FIX: Redirect to /auth/login instead of /auth\r\n    router.replace(\"/auth/login?googleError=missing_token\");\r\n  }, [params, router, loginWithToken]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center\">\r\n      <p className=\"text-sm text-muted-foreground\">\r\n        Conectando com o Google, aguarde...\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function GoogleCallbackPage() {\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Preparando conex√£o com o Google...\r\n          </p>\r\n        </div>\r\n      }\r\n    >\r\n      <GoogleCallbackInner />\r\n    </Suspense>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,SAAS;IACP,MAAM,SAAS,IAAA,6KAAe;IAC9B,MAAM,SAAS,IAAA,uKAAS;IACxB,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,0JAAO;IAElC,IAAA,0OAAS,EAAC;QACR,MAAM,aAAa,OAAO,GAAG,CAAC;QAC9B,MAAM,kBAAkB,OAAO,GAAG,CAAC;QACnC,MAAM,sBAAsB,OAAO,GAAG,CAAC,gBAAgB;QAEvD,IAAI,cAAc,CAAC,iBAAiB;YAClC,gDAAgD;YAChD,OAAO,OAAO,CACZ,CAAC,wBAAwB,EAAE,mBAAmB,aAAa;YAE7D;QACF;QAEA,IAAI,iBAAiB;YACnB,gCAAgC;YAChC,eAAe;YAEf,4BAA4B;YAC5B,IAAI,kDAAkB,eAAe,OAAO,OAAO,EAAE;;YAKrD,OAAO,OAAO,CAAC;YACf;QACF;QAEA,gDAAgD;QAChD,OAAO,OAAO,CAAC;IACjB,GAAG;QAAC;QAAQ;QAAQ;KAAe;IAEnC,qBACE,sQAAC;QAAI,WAAU;kBACb,cAAA,sQAAC;YAAE,WAAU;sBAAgC;;;;;;;;;;;AAKnD;AAEe,SAAS;IACtB,qBACE,sQAAC,yOAAQ;QACP,wBACE,sQAAC;YAAI,WAAU;sBACb,cAAA,sQAAC;gBAAE,WAAU;0BAAgC;;;;;;;;;;;kBAMjD,cAAA,sQAAC;;;;;;;;;;AAGP"}}]
}