{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/memoriza/codigo-fonte/memoriza-frontend/app/auth/google/callback/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, Suspense } from \"react\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/lib/auth-context\";\r\n\r\nfunction GoogleCallbackInner() {\r\n  const params = useSearchParams();\r\n  const router = useRouter();\r\n  const { loginWithToken } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const oauthError = params.get(\"error\");\r\n    const tokenFromServer = params.get(\"token\");\r\n    const returnUrlFromServer = params.get(\"returnUrl\") || \"/\";\r\n\r\n    if (oauthError && !tokenFromServer) {\r\n      // FIX: Redirect to /auth/login instead of /auth\r\n      router.replace(\r\n        `/auth/login?googleError=${encodeURIComponent(oauthError)}`\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (tokenFromServer) {\r\n      // salva token usando o contexto\r\n      loginWithToken(tokenFromServer);\r\n\r\n      // limpa query string da URL\r\n      if (typeof window !== \"undefined\" && window.history?.replaceState) {\r\n        const cleanUrl = window.location.pathname;\r\n        window.history.replaceState({}, \"\", cleanUrl);\r\n      }\r\n\r\n      router.replace(returnUrlFromServer);\r\n      return;\r\n    }\r\n\r\n    // FIX: Redirect to /auth/login instead of /auth\r\n    router.replace(\"/auth/login?googleError=missing_token\");\r\n  }, [params, router, loginWithToken]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center\">\r\n      <p className=\"text-sm text-muted-foreground\">\r\n        Conectando com o Google, aguarde...\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function GoogleCallbackPage() {\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Preparando conex√£o com o Google...\r\n          </p>\r\n        </div>\r\n      }\r\n    >\r\n      <GoogleCallbackInner />\r\n    </Suspense>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,SAAS;;IACP,MAAM,SAAS,IAAA,gLAAe;IAC9B,MAAM,SAAS,IAAA,0KAAS;IACxB,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,6JAAO;IAElC,IAAA,kMAAS;yCAAC;YACR,MAAM,aAAa,OAAO,GAAG,CAAC;YAC9B,MAAM,kBAAkB,OAAO,GAAG,CAAC;YACnC,MAAM,sBAAsB,OAAO,GAAG,CAAC,gBAAgB;YAEvD,IAAI,cAAc,CAAC,iBAAiB;gBAClC,gDAAgD;gBAChD,OAAO,OAAO,CACZ,CAAC,wBAAwB,EAAE,mBAAmB,aAAa;gBAE7D;YACF;YAEA,IAAI,iBAAiB;gBACnB,gCAAgC;gBAChC,eAAe;gBAEf,4BAA4B;gBAC5B,IAAI,+CAAkB,eAAe,OAAO,OAAO,EAAE,cAAc;oBACjE,MAAM,WAAW,OAAO,QAAQ,CAAC,QAAQ;oBACzC,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI;gBACtC;gBAEA,OAAO,OAAO,CAAC;gBACf;YACF;YAEA,gDAAgD;YAChD,OAAO,OAAO,CAAC;QACjB;wCAAG;QAAC;QAAQ;QAAQ;KAAe;IAEnC,qBACE,qNAAC;QAAI,WAAU;kBACb,cAAA,qNAAC;YAAE,WAAU;sBAAgC;;;;;;;;;;;AAKnD;GA3CS;;QACQ,gLAAe;QACf,0KAAS;QACG,6JAAO;;;KAH3B;AA6CM,SAAS;IACtB,qBACE,qNAAC,iMAAQ;QACP,wBACE,qNAAC;YAAI,WAAU;sBACb,cAAA,qNAAC;gBAAE,WAAU;0BAAgC;;;;;;;;;;;kBAMjD,cAAA,qNAAC;;;;;;;;;;AAGP;MAdwB"}}]
}